{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\Learn\\\\KIPO\\\\diplom\\\\imagehost\\\\client\\\\src\\\\pages\\\\MainPage\\\\MainPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { Box, Grid, CircularProgress } from \"@mui/material\";\nimport axios from \"axios\";\nimport MainCard from \"../../components/PostCardMain\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ImageGallery() {\n  _s();\n\n  const [post, setPost] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [page, setPage] = useState(1);\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setProgress(prevProgress => prevProgress >= 100 ? 0 : prevProgress + 10);\n    }, 200);\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n  const getPost = useCallback(async () => {\n    try {\n      await axios.get(`/api/post/get_post/${page * 20}`, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => setPost(response.data));\n      setIsLoaded(true);\n    } catch (e) {\n      console.log(e);\n    }\n  });\n  useEffect(() => {\n    getPost();\n  }, [post]);\n  return !isLoaded ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n    variant: \"determinate\",\n    value: progress\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n    dataLength: post === null || post === void 0 ? void 0 : post.length //This is important field to render the next data\n    ,\n    next: () => setPage(page + 1),\n    hasMore: true,\n    loader: /*#__PURE__*/_jsxDEV(\"h4\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }, this),\n    endMessage: /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Yay! You have seen it all\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 10,\n        width: \"auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        columns: {\n          xs: 4,\n          sm: 8,\n          md: 6\n        },\n        rowSpacing: 1,\n        columnSpacing: 1,\n        sx: {\n          justifyContent: \"center\"\n        },\n        children: post === null || post === void 0 ? void 0 : post.map(item => /*#__PURE__*/_jsxDEV(MainCard, {\n          todo: item\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ImageGallery, \"ix3rTV8uOpiqNwHwAWCE/F7vCzQ=\");\n\n_c = ImageGallery;\nexport default ImageGallery;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageGallery\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","Box","Grid","CircularProgress","axios","MainCard","InfiniteScroll","ImageGallery","post","setPost","isLoaded","setIsLoaded","progress","setProgress","page","setPage","timer","setInterval","prevProgress","clearInterval","getPost","get","headers","then","response","data","e","console","log","length","textAlign","mt","width","xs","sm","md","justifyContent","map","item","id"],"sources":["C:/Users/Vadim/Desktop/Learn/KIPO/diplom/imagehost/client/src/pages/MainPage/MainPage.jsx"],"sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport { Box, Grid, CircularProgress } from \"@mui/material\";\nimport axios from \"axios\";\nimport MainCard from \"../../components/PostCardMain\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\nfunction ImageGallery() {\n  const [post, setPost] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [page, setPage] = useState(1);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setProgress((prevProgress) =>\n        prevProgress >= 100 ? 0 : prevProgress + 10\n      );\n    }, 200);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, []);\n\n  const getPost = useCallback(async () => {\n    try {\n      await axios\n        .get(`/api/post/get_post/${page * 20}`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        })\n        .then((response) => setPost(response.data));\n      setIsLoaded(true);\n    } catch (e) {\n      console.log(e);\n    }\n  });\n\n  useEffect(() => {\n    getPost();\n  }, [post]);\n\n  return !isLoaded ? (\n    <CircularProgress variant=\"determinate\" value={progress} />\n  ) : (\n    <InfiniteScroll\n      dataLength={post?.length} //This is important field to render the next data\n      next={() => setPage(page + 1)}\n      hasMore={true}\n      loader={<h4></h4>}\n      endMessage={\n        <p style={{ textAlign: \"center\" }}>\n          <b>Yay! You have seen it all</b>\n        </p>\n      }\n    >\n      <Box sx={{ mt: 10, width: \"auto\" }}>\n        <Grid\n          container\n          spacing={2}\n          columns={{ xs: 4, sm: 8, md: 6 }}\n          rowSpacing={1}\n          columnSpacing={1}\n          sx={{ justifyContent: \"center\" }}\n        >\n          {post?.map((item) => (\n              <MainCard key={item.id} todo={item} />\n            ))}\n          {/* <InfiniteScroll data={post} drawElement={renderChild} size={5}></InfiniteScroll> */}\n        </Grid>\n      </Box>\n    </InfiniteScroll>\n  );\n}\n\nexport default ImageGallery;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}