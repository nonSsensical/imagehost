{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vadim\\\\Desktop\\\\Learn\\\\KIPO\\\\diplom\\\\imagehost\\\\client\\\\src\\\\pages\\\\SubsPage\\\\SubsPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useCallback, useEffect } from \"react\";\nimport { Typography } from \"@mui/material\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction UserPage() {\n  _s();\n\n  const [value, setValue] = React.useState(\"\");\n\n  const handleChange = event => {\n    setValue(event.target.value);\n  };\n\n  const {\n    userId\n  } = useContext(AuthContext);\n  const [profile, setProfile] = useState(); // const [image, setImage] = useState();\n\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isLoadedProfile, setIsLoadedProfile] = useState(false);\n  const [subs, setSubs] = useState();\n  const getSubs = useCallback(async () => {\n    try {\n      await axios.get(`/api/subscribes/get_subscribes_list/${window.location.pathname.slice(6)}`, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => setTimeout(() => {\n        setSubs(response.data);\n        setIsLoaded(true);\n      }, 2000));\n    } catch (e) {\n      console.log(e);\n    }\n  });\n  const getProfile = useCallback(async () => {\n    try {\n      await axios.get(`/api/auth/get_user`, {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(response => setTimeout(() => {\n        setProfile(response.data);\n        setIsLoadedProfile(true);\n      }, 2000));\n    } catch (e) {\n      console.log(e);\n    }\n  });\n  useEffect(() => {\n    getSubs();\n  }, []);\n  useEffect(() => {\n    getProfile();\n  }, []);\n  let chk = [];\n  return !isLoaded ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : subs.length == 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : subs.map(item => /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      sx: {\n        display: \"flex\",\n        fontWeight: 400,\n        fontSize: \"20px\",\n        alignItems: \"center\",\n        color: \"red\"\n      },\n      children: isLoadedProfile ? profile.map(usr => usr.id == item.subscribes_id ? usr.nickname : null) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      sx: {\n        display: \"flex\",\n        fontWeight: 400,\n        fontSize: \"20px\",\n        alignItems: \"center\",\n        color: \"#8ac8ff\"\n      },\n      children: item.date_publication\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      sx: {\n        display: \"flex\",\n        fontWeight: 400,\n        fontSize: \"16px\",\n        alignItems: \"center\",\n        color: \"white\"\n      },\n      children: item.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true));\n}\n\n_s(UserPage, \"q03DtHJi4KwdCuvCCZAPiOaDaaQ=\");\n\n_c = UserPage;\nexport default UserPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserPage\");","map":{"version":3,"names":["React","useState","useContext","useCallback","useEffect","Typography","AuthContext","axios","UserPage","value","setValue","handleChange","event","target","userId","profile","setProfile","isLoaded","setIsLoaded","isLoadedProfile","setIsLoadedProfile","subs","setSubs","getSubs","get","window","location","pathname","slice","headers","then","response","setTimeout","data","e","console","log","getProfile","chk","length","map","item","display","fontWeight","fontSize","alignItems","color","usr","id","subscribes_id","nickname","date_publication","message"],"sources":["C:/Users/Vadim/Desktop/Learn/KIPO/diplom/imagehost/client/src/pages/SubsPage/SubsPage.jsx"],"sourcesContent":["import React, {\n  useState,\n  useContext,\n  useCallback,\n  useEffect,\n} from \"react\";\n\nimport {\n  Typography\n} from \"@mui/material\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\n\nfunction UserPage() {\n  const [value, setValue] = React.useState(\"\");\n\n  const handleChange = (event) => {\n    setValue(event.target.value);\n  };\n\n  const { userId } = useContext(AuthContext);\n\n  const [profile, setProfile] = useState();\n  // const [image, setImage] = useState();\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isLoadedProfile, setIsLoadedProfile] = useState(false);\n\n  const [subs, setSubs] = useState();\n\n  const getSubs = useCallback(async () => {\n    try {\n      await axios\n        .get(\n          `/api/subscribes/get_subscribes_list/${window.location.pathname.slice(6)}`,\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        )\n        .then((response) =>\n          setTimeout(() => {\n            setSubs(response.data);\n            setIsLoaded(true);\n          }, 2000)\n        );\n    } catch (e) {\n      console.log(e);\n    }\n  });\n\n  const getProfile = useCallback(async () => {\n    try {\n      await axios\n        .get(`/api/auth/get_user`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        })\n        .then((response) =>\n          setTimeout(() => {\n            setProfile(response.data);\n            setIsLoadedProfile(true);\n          }, 2000)\n        );\n    } catch (e) {\n      console.log(e);\n    }\n  });\n\n  useEffect(() => {\n    getSubs();\n  }, []);\n\n  useEffect(() => {\n    getProfile();\n  }, []);\n\n  let chk = [];\n\n  return !isLoaded\n    ? \n    (\n       <>\n      \n       </>\n    )\n    : \n    (\n       subs.length == 0 ?\n       (<>\n        \n       </>) \n       \n       : \n       \n       (\n        subs.map((item) => (\n            <>\n            \n              <Typography\n                sx={{\n                  display: \"flex\",\n                  fontWeight: 400,\n                  fontSize: \"20px\",\n                  alignItems: \"center\",\n                  color: \"red\",\n                }}\n              >\n                {isLoadedProfile ? (\n                    profile.map((usr) =>\n                    usr.id == item.subscribes_id ? usr.nickname : null\n                )\n                ) : \n                (\n                    null\n                )}\n              </Typography>\n              <Typography\n                sx={{\n                  display: \"flex\",\n                  fontWeight: 400,\n                  fontSize: \"20px\",\n                  alignItems: \"center\",\n                  color: \"#8ac8ff\",\n                }}\n              >\n                {item.date_publication}\n              </Typography>\n              <Typography\n                sx={{\n                  display: \"flex\",\n                  fontWeight: 400,\n                  fontSize: \"16px\",\n                  alignItems: \"center\",\n                  color: \"white\",\n                }}\n              >\n                {item.message}\n              </Typography>\n            </>\n          ))\n       )\n    )\n}\n\nexport default UserPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}